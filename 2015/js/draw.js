$(function(){function o(o){var e=Math.pow(10,2);google.maps.geometry.spherical&&i.html(Math.round(google.maps.geometry.spherical.computeLength(o)/1e3*e)/e)}function e(){clearTimeout(r),r=setTimeout(o.bind(this,s.map(function(o){return o.getPosition()})),1800)}function n(o,t){return google.maps.event.addListener(o,"dragend",function(){l.panTo(o.getPosition()),g.setPath(s.map(function(o){return o.getPosition()})),e()}),google.maps.event.addListener(o,"dblclick",function(){console.error(o.getPosition().lat);var e=new google.maps.LatLng(o.getPosition().lat()-1e-4,o.getPosition().lng()-1e-4);n(new google.maps.Marker({map:l,draggable:!0,center:e,position:e}),s.indexOf(o)+1)}),google.maps.event.addListener(o,"rightclick",function(){s.splice(s.indexOf(o),1),o.setMap(null),g.setPath(s.map(function(o){return o.getPosition()})),e()}),t?s.splice(t,0,o):s.push(o),g.setPath(s.map(function(o){return o.getPosition()})),e(),o}function t(){var o={zoom:17,scaleControl:!0,navigationControl:!1,mapTypeControl:!1,zoomControl:!0,scrollwheel:!0,streetViewControl:!1,center:new google.maps.LatLng(23.568596231491235,120.3035703338623)};l=new google.maps.Map(a.get(0),o),g=new google.maps.Polyline({strokeColor:"rgba(39, 40, 34, 1)",icons:[{offset:"100%"}]}),g.setMap(l),google.maps.event.addListener(l,"click",function(o){n(new google.maps.Marker({map:l,draggable:!0,center:o.latLng,position:o.latLng}),0),l.panTo(o.latLng)})}var a=$("#map"),i=$(".length"),l=null,s=[],g=null,r=null;google.maps.event.addDomListener(window,"load",t),$("#log").click(function(){var o="var points = [\n  "+s.map(function(o){return"new google.maps.LatLng ("+o.getPosition().lat()+", "+o.getPosition().lng()+")"}).join(", ")+"\n];";$(".console-log textarea").text(o).focus(),$(".console-log").addClass("show")}),$("#input").click(function(){var o=$(this).prev().val().match(/[0-9.]+\s*,\s*[0-9.]+/g);o&&o.length&&(s=s.map(function(o){o.setMap(null)}).filter(function(o){return o}),o=o.map(function(o){return o.split(/\s*,\s*/)}).map(function(o){return n(new google.maps.Marker({map:l,draggable:!0,center:new google.maps.LatLng(o[0],o[1]),position:new google.maps.LatLng(o[0],o[1])}))}).pop(),l.panTo(o.getPosition()))}),$(".console-log .close").click(function(){$(".console-log").removeClass("show")}),$(".console-log textarea").focus(function(){$(this).select()})});